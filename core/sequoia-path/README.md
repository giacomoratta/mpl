clean and separate tests

todo: doc
